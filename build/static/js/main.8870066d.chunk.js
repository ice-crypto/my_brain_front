(this.webpackJsonpmy_brain_front=this.webpackJsonpmy_brain_front||[]).push([[0],{111:function(e,t,n){},303:function(e,t){},309:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(32),o=n.n(i),c=(n(111),n(319)),r=n(311),l=n(324),h=n(325),u=(n(49),n(62)),d=n(35),b=n(26),j=n(27),g=n(28),p=n(16),O=n(30),f=n(29),m=n(320),v=n(315),x=n(313),k=n(317),y=n(64),C=n(187),S=n(4),F=C.a.TextArea,w=1,D=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).onTextClick=a.onTextClick.bind(Object(p.a)(a)),a.onSelectClick=a.onSelectClick.bind(Object(p.a)(a)),a.state={problem_counter:0},a}return Object(g.a)(n,[{key:"onTextClick",value:function(){document.getElementById("problem").value+="[box".concat(w,"]"),w+=1}},{key:"onSelectClick",value:function(){document.getElementById("problem").value+="[select".concat(w,"{1,}{2,}{3,}{4,}]"),w+=1}},{key:"render",value:function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{type:"primary",onClick:this.onTextClick,children:"Text Input"}),Object(S.jsx)(y.a,{type:"primary",onClick:this.onSelectClick,children:"Text Select"}),Object(S.jsx)(x.a.Item,{label:"Problem body",name:"body",children:Object(S.jsx)(F,{rows:8,id:"problem"})})]})}}]),n}(a.Component),_=n(322),R=n(323),I=n(193),T=function(){return Object(S.jsx)(x.a.List,{name:"answers",children:function(e,t){var n=t.add,a=t.remove;return Object(S.jsxs)(S.Fragment,{children:[e.map((function(e){return Object(S.jsxs)(_.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(S.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},e),{},{name:[e.name,"answer"],fieldKey:[e.fieldKey,"answer"],rules:[{required:!0,message:"Enter Answer"}],children:Object(S.jsx)(C.a,{})})),Object(S.jsx)(R.a,{onClick:function(){return a(e.name)}})]},e.key)})),Object(S.jsx)(x.a.Item,{children:Object(S.jsx)(y.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(S.jsx)(I.a,{}),children:"Add field"})})]})}})},N=n(61),B=n.n(N),E=n(132);function q(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};B.a.defaults.baseURL="http://stagingaccessoryriver.net",B.a.defaults.headers.common["X-CSRF-Token"]=Object(E.csrfToken)(),B()({method:"".concat(e),url:"".concat(t),data:n}).then((function(e){console.log(e),a(e)})).catch((function(e){console.error(e),s(e)}))}var P={labelCol:{span:8},wrapperCol:{span:16}},K={wrapperCol:{offset:8,span:16}},G=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).onChange=e.onChange.bind(Object(p.a)(e)),e.onFormatChange=e.onFormatChange.bind(Object(p.a)(e)),e.onBookChange=e.onBookChange.bind(Object(p.a)(e)),e.onFinish=e.onFinish.bind(Object(p.a)(e)),e.getFormats=e.getFormats.bind(Object(p.a)(e)),e.getBooks=e.getBooks.bind(Object(p.a)(e)),e.onFinishFailed=e.onFinishFailed.bind(Object(p.a)(e)),e.onRootSelectChange=e.onRootSelectChange.bind(Object(p.a)(e)),e.state={root_categories:[],select_tree:[],categories:[],formats:[],books:[],panelShow:!1,data:{},response_status:""},e}return Object(g.a)(n,[{key:"onChange",value:function(e){console.log(e),this.setState({categories:e})}},{key:"onFormatChange",value:function(e){console.log(e);var t=this.state.data;t.format_id=e,this.setState({data:t,panelShow:!0})}},{key:"onBookChange",value:function(e){console.log(e);var t=this.state.data;t.books_id=e,this.setState({data:t})}},{key:"onRootSelectChange",value:function(e){var t=this;console.log(e),q("GET","/api/v1/categories/".concat(e),(function(e){console.log(e.data),t.setState({select_tree:e.data})}))}},{key:"onFinish",value:function(e){var t,n=this;e.categories=this.state.categories,t=e.book_id,delete e.book_id,q("POST","/api/v1/problems",{problem:e,book:t},(function(e){n.setState({response_status:201==e.status?"success":"error"})}))}},{key:"onFinishFailed",value:function(e){console.log("Failed:",e)}},{key:"getRootCategories",value:function(){var e=this;q("GET","/api/v1/categories",null,(function(t){console.log(t.data);var n=[];t.data.forEach((function(e){return n.push({value:e.id,label:e.title})})),e.setState({root_categories:n})}))}},{key:"getFormats",value:function(){var e=this;q("GET","/api/v1/formats",null,(function(t){console.log(t.data);var n=[];t.data.forEach((function(e){return n.push({value:e.id,label:e.problem_type})})),e.setState({formats:n})}))}},{key:"getBooks",value:function(){var e=this;q("GET","/api/v1/books",null,(function(t){console.log(t.data);var n=[];t.data.forEach((function(e){return n.push({value:e.id,label:e.title})})),e.setState({books:n})}))}},{key:"componentDidMount",value:function(){this.getRootCategories(),this.getBooks(),this.getFormats()}},{key:"render",value:function(){var e,t;return this.state.panelShow&&(e=Object(S.jsx)(D,{})),""!=this.state.response_status&&(t=Object(S.jsx)(m.a,{message:this.state.response_status,type:this.state.response_status})),Object(S.jsxs)(S.Fragment,{children:[t,Object(S.jsx)(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a root category",onChange:this.onRootSelectChange,options:this.state.root_categories}),Object(S.jsxs)(x.a,Object(b.a)(Object(b.a)({},P),{},{name:"basic",onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(S.jsx)(x.a.Item,{label:"Book title",name:"book_id",children:Object(S.jsx)(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a problem book",onChange:this.onBookChange,options:this.state.books})}),Object(S.jsxs)(x.a.Item,{label:"Select Category",name:"categories",children:[Object(S.jsx)(k.a,{options:this.state.select_tree,onChange:this.onChange,placeholder:"Please select",changeOnSelect:!0}),","]}),Object(S.jsx)(x.a.Item,{label:"Problem Format",name:"format_id",children:Object(S.jsx)(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a problem format",onChange:this.onFormatChange,options:this.state.formats})}),e,Object(S.jsx)(T,{}),Object(S.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},K),{},{children:Object(S.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})}}]),n}(a.Component),M=n(58),Q=n(321),A=n(98),L=function(e){var t=e.options,n=e.onChange,a=e.index;return Object(S.jsx)(x.a.Item,{name:"answer",fieldKey:[a,"answer"],children:Object(S.jsx)(v.a,{showSearch:!0,style:{width:200},placeholder:"Select answer",onChange:n,options:t})})},V=(C.a.TextArea,function(e){var t=e.index,n=e.message,a=e.status,s=e.answer;return Object(S.jsx)(x.a.Item,{noStyle:!0,name:[t,"answer"],validateStatus:a,help:s,children:Object(S.jsx)("input",{placeholder:n})})}),U=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={results:e.results},a}return Object(g.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.body.length>0?this.props.body.split(""):[],a=!0;return e=n.map((function(e,s){if("["==e){if(a=!1,"box"==n.slice(s+1,s+4).join(",").replace(/,/g,"")){var i=n.slice(s+4,n.indexOf("]",s)).join(",").replace(/,/g,"");return Object(S.jsx)(V,{index:i,message:"\u554f"+i,status:t.state.results.length>0?t.state.results[i].result:"",answer:t.state.results.length>0?t.state.results[i].answer:""})}return"select"==n.slice(s+1,s+7).join(",").replace(/,/g,"")?Object(S.jsx)(L,{index:n.slice(s+4,s+5),message:"\u554f"+n.slice(s+4,s+5)}):"<else>"}if("]"!=e)return a?e:void 0;a=!0})),Object(S.jsx)(S.Fragment,{children:e})}}]),n}(a.Component),z=function(e){return Object(S.jsxs)("h2",{children:["It is ",e.date.toLocaleTimeString(),"."]})},H=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={date:e.date,isStop:e.isStop},a}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){var e=this.state.date;e.setSeconds(e.getSeconds()+1),this.setState({date:e})}},{key:"render",value:function(){return this.state.isStop&&(clearInterval(this.timerID),this.setState({isStop:!1})),Object(S.jsx)("div",{children:Object(S.jsx)(z,{date:this.state.date})})}}]),n}(s.a.Component),J={labelCol:{span:8},wrapperCol:{span:16}},X={wrapperCol:{offset:8,span:16}},W=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).getQuestions=e.getQuestions.bind(Object(p.a)(e)),e.onFinishFailed=e.onFinishFailed.bind(Object(p.a)(e)),e.onFinish=e.onFinish.bind(Object(p.a)(e)),e.onNextClick=e.onNextClick.bind(Object(p.a)(e)),e.onFinishClick=e.onFinishClick.bind(Object(p.a)(e)),e.formRef=s.a.createRef(),e.state={data:[],questions:[],counter:0,results:[],isShow:!0,submitDisabled:!1,nextDisabled:!0,date:new Date("2000/1/1"),clockStop:!1,response_status:""},e}return Object(g.a)(n,[{key:"getQuestions",value:function(){var e=this;q("GET","/api/v1/problems/questions",null,(function(t){console.log(t),e.setState({questions:t.data,isShow:!(t.data.length<=1)})}))}},{key:"onFinish",value:function(e){var t=[],n=1,a=this.state.data;this.state.questions[this.state.counter].answers.forEach((function(a,s){var i;a==e[s].answer?i="success":(i="error",n--),t.push({result:i,answer:a})})),a.push({problem_id:this.state.questions[this.state.counter].id,correct:n>=0,timesec:400}),this.setState({results:t,data:a,date:new Date("2000/1/1"),clockStop:!0,submitDisabled:!0,nextDisabled:!1}),console.log(this.state.questions[this.state.counter]),console.log(this.state.data)}},{key:"onFinishFailed",value:function(e){console.log(e)}},{key:"onNextClick",value:function(){this.state.questions.length==this.state.counter+1+1?this.setState({counter:this.state.counter+1,isShow:!1}):this.setState({counter:this.state.counter+1,results:[]}),this.setState({submitDisabled:!1,nextDisabled:!0}),this.formRef.current.resetFields()}},{key:"onFinishClick",value:function(){var e=this;q("POST","/api/v1/problems/analyze",{problem:this.state.data},(function(t){console.log(t),e.setState({response_status:200==t.status?"success":"error"})}))}},{key:"componentDidMount",value:function(){this.getQuestions()}},{key:"render",value:function(){var e,t,n=this.state.questions.length>0?this.state.questions[this.state.counter].body:[],a=this.state.results.map((function(e,t){var n="\u554f\u984c".concat(t+1," \u7b54\u3048: ").concat(e.answer);return Object(S.jsx)(M.a,{children:Object(S.jsx)(m.a,{message:n,type:e.result})},t.toString())}));return e=this.state.isShow?Object(S.jsx)(y.a,{type:"primary",onClick:this.onNextClick,disabled:this.state.nextDisabled,children:"Next"}):Object(S.jsx)(y.a,{type:"primary",onClick:this.onFinishClick,disabled:this.state.nextDisabled,children:"Finish"}),""!=this.state.response_status&&(t=Object(S.jsx)(m.a,{message:this.state.response_status,type:this.state.response_status})),Object(S.jsxs)(S.Fragment,{children:[t,Object(S.jsx)(H,{date:this.state.date,isStop:this.state.clockStop}),Object(S.jsxs)(x.a,Object(b.a)(Object(b.a)({},J),{},{name:"basic",ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(S.jsx)(Q.a,{title:"\u4ee5\u4e0b\u306e\u7a7a\u6b04\u3092\u57cb\u3081\u306a\u3055\u3044\u3002",style:{width:300},children:Object(S.jsx)(U,{body:n,results:this.state.results})}),Object(S.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},X),{},{children:Object(S.jsx)(y.a,{type:"primary",htmlType:"submit",disabled:this.state.submitDisabled,children:"Submit"})})),e]})),Object(S.jsx)(A.a,{gutter:[16,16],children:a})]})}}]),n}(a.Component),Y={labelCol:{span:8},wrapperCol:{span:16}},Z={wrapperCol:{offset:8,span:16}},$=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).getQuestions=e.getQuestions.bind(Object(p.a)(e)),e.onFinishFailed=e.onFinishFailed.bind(Object(p.a)(e)),e.onFinish=e.onFinish.bind(Object(p.a)(e)),e.onNextClick=e.onNextClick.bind(Object(p.a)(e)),e.onFinishClick=e.onFinishClick.bind(Object(p.a)(e)),e.formRef=s.a.createRef(),e.state={data:[],questions:[],counter:0,results:[],isShow:!0,submitDisabled:!1,nextDisabled:!0,date:new Date("2000/1/1"),clockStop:!1,response_status:""},e}return Object(g.a)(n,[{key:"getQuestions",value:function(){var e=this;q("GET","/api/v1/problems/today_questions",null,(function(t){console.log(t),e.setState({questions:t.data,isShow:!(t.data.length<=1)})}))}},{key:"onFinish",value:function(e){var t=[],n=1,a=this.state.data;this.state.questions[this.state.counter].answers.forEach((function(a,s){var i;a==e[s].answer?i="success":(i="error",n--),t.push({result:i,answer:a})})),a.push({problem_id:this.state.questions[this.state.counter].id,correct:n>=0,timesec:400}),this.setState({results:t,data:a,date:new Date("2000/1/1"),clockStop:!0,submitDisabled:!0,nextDisabled:!1}),console.log(this.state.questions[this.state.counter]),console.log(this.state.data)}},{key:"onFinishFailed",value:function(e){console.log(e)}},{key:"onNextClick",value:function(){this.state.questions.length==this.state.counter+1+1?this.setState({counter:this.state.counter+1,isShow:!1}):this.setState({counter:this.state.counter+1,results:[]}),this.setState({submitDisabled:!1,nextDisabled:!0}),this.formRef.current.resetFields()}},{key:"onFinishClick",value:function(){this.setState({response_status:"success"})}},{key:"componentDidMount",value:function(){this.getQuestions()}},{key:"render",value:function(){var e,t,n=this.state.questions.length>0?this.state.questions[this.state.counter].body:[],a=this.state.results.map((function(e,t){var n="\u554f\u984c".concat(t+1," \u7b54\u3048: ").concat(e.answer);return Object(S.jsx)(M.a,{children:Object(S.jsx)(m.a,{message:n,type:e.result})},t.toString())}));return e=this.state.isShow?Object(S.jsx)(y.a,{type:"primary",onClick:this.onNextClick,disabled:this.state.nextDisabled,children:"Next"}):Object(S.jsx)(y.a,{type:"primary",onClick:this.onFinishClick,disabled:this.state.nextDisabled,children:"Finish"}),""!=this.state.response_status&&(t=Object(S.jsx)(m.a,{message:this.state.response_status,type:this.state.response_status})),Object(S.jsxs)(S.Fragment,{children:[t,Object(S.jsx)(H,{date:this.state.date,isStop:this.state.clockStop}),Object(S.jsxs)(x.a,Object(b.a)(Object(b.a)({},Y),{},{name:"basic",ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(S.jsx)(Q.a,{title:"\u4ee5\u4e0b\u306e\u7a7a\u6b04\u3092\u57cb\u3081\u306a\u3055\u3044\u3002",style:{width:300},children:Object(S.jsx)(U,{body:n,results:this.state.results})}),Object(S.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},Z),{},{children:Object(S.jsx)(y.a,{type:"primary",htmlType:"submit",disabled:this.state.submitDisabled,children:"Submit"})})),e]})),Object(S.jsx)(A.a,{gutter:[16,16],children:a})]})}}]),n}(a.Component),ee=n(73),te=n(314),ne=n(191),ae=n(318),se=function(e){var t=e.visible,n=e.onCreate,a=e.onCancel,s=e.onClick,i=(e.target,x.a.useForm()),o=Object(ne.a)(i,1)[0];return Object(S.jsxs)(ae.a,{visible:t,title:"Create a new collection",okText:"Create",cancelText:"Cancel",onCancel:function(){a(),o.resetFields()},onOk:function(){o.validateFields().then((function(e){o.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:[Object(S.jsx)(y.a,{type:"primary",onClick:s,children:"\u524a\u9664"}),Object(S.jsx)(x.a,{form:o,layout:"vertical",name:"form_in_modal",children:Object(S.jsx)(x.a.Item,{name:"node",label:"Node Name",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(S.jsx)(C.a,{})})})]})},ie=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).onDrop=function(e){var t,n=e.node.key,s=e.dragNode.key,i=e.node.pos.split("-"),o=e.dropPosition-Number(i[i.length-1]),c=function e(t,n,a){for(var s=0;s<t.length;s++){if(t[s].key===n)return a(t[s],s,t);t[s].children&&e(t[s].children,n,a)}},r=Object(ee.a)(a.state.gData);if(c(r,s,(function(e,n,a){a.splice(n,1),t=e})),e.dropToGap)if((e.node.props.children||[]).length>0&&e.node.props.expanded&&1===o)c(r,n,(function(e){e.children=e.children||[],e.children.unshift(t)}));else{var l,h;c(r,n,(function(e,t,n){l=n,h=t})),-1===o?l.splice(h,0,t):l.splice(h+1,0,t)}else c(r,n,(function(e){e.children=e.children||[],e.children.unshift(t)}));a.setState({gData:r})},a.onRightClick=function(e){a.setState({target:e.node.key,visible:!0})},a.onSelect=function(e,t){console.log("selected",e,t)},a.onCreate=function(e){a.setState({visible:!1});var t,n,s,i=Object(ee.a)(a.state.gData),o=function e(t,n,a){for(var s=0;s<t.length;s++){if(t[s].key===n)return a(t[s],s,t);t[s].children&&e(t[s].children,n,a)}};(o(i,a.state.target,(function(e,t,a){n=e})),0==(n.children||[]).length)?(t=[{title:e.node,key:n.key+"-0"}],o(i,n.key,(function(e){e.children=t}))):(o(i,n.key,(function(e,t,n){s=e.children.length})),t={title:e.node,key:n.key+"-"+s},o(i,n.key,(function(e){e.children.unshift(t)})));a.setState({gData:i})},a.removeClick=function(){var e=Object(ee.a)(a.state.gData);!function e(t,n,a){for(var s=0;s<t.length;s++){if(t[s].key===n)return a(t[s],s,t);t[s].children&&e(t[s].children,n,a)}}(e,a.state.target,(function(e,t,n){n.splice(t,1)})),a.setState({gData:e})},a.state={gData:e.gData,expandedKeys:["0","0-0","0-0-0","0-0-0-0"],visible:!1,target:""},a.onRightClick=a.onRightClick.bind(Object(p.a)(a)),a.onSelect=a.onSelect.bind(Object(p.a)(a)),a.onCreate=a.onCreate.bind(Object(p.a)(a)),a.removeClick=a.removeClick.bind(Object(p.a)(a)),a}return Object(g.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(te.a,{className:"draggable-tree",defaultExpandedKeys:this.state.expandedKeys,draggable:!0,blockNode:!0,defaultExpandAll:!0,onRightClick:this.onRightClick,onSelect:this.onSelect,onDragEnter:this.onDragEnter,onDrop:this.onDrop,treeData:this.state.gData}),Object(S.jsx)(se,{visible:this.state.visible,onCreate:this.onCreate,onCancel:function(){e.setState({visible:!1})},onClick:this.removeClick,target:this.state.target})]})}}]),n}(s.a.Component),oe={labelCol:{span:8},wrapperCol:{span:16}},ce={wrapperCol:{offset:8,span:16}},re=function(e){var t=e.onFinish,n=e.onFinishFailed;return Object(S.jsxs)(x.a,Object(b.a)(Object(b.a)({},oe),{},{name:"basic",onFinish:t,onFinishFailed:n,children:[Object(S.jsx)(x.a.Item,{label:"Root Node",name:"root_node",rules:[{required:!0,message:"Please input Root Node!"}],children:Object(S.jsx)(C.a,{})}),Object(S.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},ce),{},{children:Object(S.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))},le=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).onFinish=function(t){console.log("Success:",t),e.setState({gData:[{title:t.root_node,key:"0-0"}]}),e.setState({isShow:!0}),console.log(e.state.gData)},e.onFinishFailed=function(e){console.log("Failed:",e)},e.state={gData:[],isShow:!1},e.postCategories=e.postCategories.bind(Object(p.a)(e)),e.handleButton=e.handleButton.bind(Object(p.a)(e)),e}return Object(g.a)(n,[{key:"handleButton",value:function(){this.postCategories(),console.log("handleButton")}},{key:"postCategories",value:function(e){q("POST","/api/v1/categories",{category:{data:this.state.gData}},(function(e){console.log(e)}))}},{key:"render",value:function(){var e;return this.state.isShow&&(e=Object(S.jsx)(ie,{gData:this.state.gData})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(re,{onFinish:this.onFinish,onFinishFailed:this.onFinishFailed}),e,Object(S.jsx)(y.a,{type:"primary",onClick:this.handleButton,children:"Post Categories"}),Object(S.jsx)("p",{children:"category new"})]})}}]),n}(a.Component),he=n(316),ue=n(312),de={labelCol:{span:8},wrapperCol:{span:16}},be={wrapperCol:{offset:8,span:16}},je=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).onChange=e.onChange.bind(Object(p.a)(e)),e.onChangeNumber=e.onChangeNumber.bind(Object(p.a)(e)),e.onFinish=e.onFinish.bind(Object(p.a)(e)),e.onFinishFailed=e.onFinishFailed.bind(Object(p.a)(e)),e.onRootSelectChange=e.onRootSelectChange.bind(Object(p.a)(e)),e.state={root_categories:[],select_tree:[],categories:[],price:-1},e}return Object(g.a)(n,[{key:"onChange",value:function(e){console.log(e),this.setState({categories:e})}},{key:"onChangeNumber",value:function(e){this.setState({price:e})}},{key:"onRootSelectChange",value:function(e){var t=this;console.log(e),q("GET","/api/v1/categories/".concat(e),null,(function(e){console.log(e.data),t.setState({select_tree:e.data})}))}},{key:"onFinish",value:function(e){e.categories=this.state.categories,e.price=this.state.price,q("POST","/api/v1/books",{book:e},(function(e){return console.log(e)}))}},{key:"onFinishFailed",value:function(e){console.log("Failed:",e)}},{key:"getRootCategories",value:function(){var e=this;q("GET","/api/v1/categories",(function(t){console.log(t.data);var n=[];t.data.forEach((function(e){return n.push({value:e.id,label:e.title})})),e.setState({root_categories:n})}))}},{key:"componentDidMount",value:function(){this.getRootCategories()}},{key:"render",value:function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a root category",onChange:this.onRootSelectChange,options:this.state.root_categories}),Object(S.jsxs)(x.a,Object(b.a)(Object(b.a)({},de),{},{name:"basic",onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(S.jsx)(x.a.Item,{label:"Book title",name:"title",rules:[{required:!0,message:"Please input Book title."}],children:Object(S.jsx)(C.a,{})}),Object(S.jsx)(x.a.Item,{label:"Book price",name:"price",children:Object(S.jsx)(he.a,{min:1,max:1e5,onChange:this.onChangeNumber,defaultValue:1e3})}),Object(S.jsxs)(x.a.Item,{label:"Select Category",name:"categories",children:[Object(S.jsx)(k.a,{options:this.state.select_tree,onChange:this.onChange,placeholder:"Please select",changeOnSelect:!0}),","]}),Object(S.jsx)(x.a.Item,{label:"Book published Date",name:"published_at",rules:[{required:!0,message:"Please input Book published date."}],children:Object(S.jsx)(ue.a,{})}),Object(S.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},be),{},{children:Object(S.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})}}]),n}(a.Component),ge=n(155),pe=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).onDrop=function(e){var t,n=e.node.key,s=e.dragNode.key,i=e.node.pos.split("-"),o=e.dropPosition-Number(i[i.length-1]),c=function e(t,n,a){for(var s=0;s<t.length;s++){if(t[s].key===n)return a(t[s],s,t);t[s].children&&e(t[s].children,n,a)}},r=Object(ee.a)(a.state.gData);if(c(r,s,(function(e,n,a){a.splice(n,1),t=e})),e.dropToGap)if((e.node.props.children||[]).length>0&&e.node.props.expanded&&1===o)c(r,n,(function(e){e.children=e.children||[],e.children.unshift(t)}));else{var l,h;c(r,n,(function(e,t,n){l=n,h=t})),-1===o?l.splice(h,0,t):l.splice(h+1,0,t)}else c(r,n,(function(e){e.children=e.children||[],e.children.unshift(t)}));a.setState({gData:r})},a.onRightClick=function(e){a.setState({target:e.node.key,visible:!0})},a.onSelect=function(e,t){console.log("selected",e,t)},a.onCreate=function(e){a.setState({visible:!1});var t,n,s,i=Object(ee.a)(a.state.gData),o=function e(t,n,a){for(var s=0;s<t.length;s++){if(t[s].key===n)return a(t[s],s,t);t[s].children&&e(t[s].children,n,a)}};(o(i,a.state.target,(function(e,t,a){n=e})),0==(n.children||[]).length)?(t=[{title:e.node,key:n.key+"-0"}],o(i,n.key,(function(e){e.children=t}))):(o(i,n.key,(function(e,t,n){s=e.children.length})),t={title:e.node,key:n.key+"-"+s},o(i,n.key,(function(e){e.children.unshift(t)})));a.setState({gData:i})},a.removeClick=function(){var e=Object(ee.a)(a.state.gData);!function e(t,n,a){for(var s=0;s<t.length;s++){if(t[s].key===n)return a(t[s],s,t);t[s].children&&e(t[s].children,n,a)}}(e,a.state.target,(function(e,t,n){var s=a.state.removes;s.push(e.value),a.setState({removes:s}),n.splice(t,1)})),a.setState({gData:e})},a.state={gData:e.gData,expandedKeys:["0","0-0","0-0-0","0-0-0-0"],visible:!1,target:"",removes:e.removes},a.onRightClick=a.onRightClick.bind(Object(p.a)(a)),a.onSelect=a.onSelect.bind(Object(p.a)(a)),a.onCreate=a.onCreate.bind(Object(p.a)(a)),a.removeClick=a.removeClick.bind(Object(p.a)(a)),a}return Object(g.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(te.a,{className:"draggable-tree",defaultExpandedKeys:this.state.expandedKeys,draggable:!0,blockNode:!0,defaultExpandAll:!0,onRightClick:this.onRightClick,onSelect:this.onSelect,onDragEnter:this.onDragEnter,onDrop:this.onDrop,treeData:this.state.gData}),Object(S.jsx)(se,{visible:this.state.visible,onCreate:this.onCreate,onCancel:function(){e.setState({visible:!1})},onClick:this.removeClick,target:this.state.target})]})}}]),n}(s.a.Component),Oe=(ge.a.TabPane,function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).onFinish=function(t){e.setState({gData:[{title:t.root_node,key:"0-0"}]}),e.setState({isShow:!0}),console.log(e.state.gData)},e.onFinishFailed=function(e){console.log("Failed:",e)},B.a.defaults.baseURL="http://stagingaccessoryriver.net",e.getCategories=e.getCategories.bind(Object(p.a)(e)),e.onFinish=e.onFinish.bind(Object(p.a)(e)),e.onFinishFailed=e.onFinishFailed.bind(Object(p.a)(e)),e.onRootSelectChange=e.onRootSelectChange.bind(Object(p.a)(e)),e.handleButton=e.handleButton.bind(Object(p.a)(e)),e.state={gData:[],removes:[],isShow:!1},e}return Object(g.a)(n,[{key:"handleButton",value:function(){this.postCategories(),console.log("handleButton")}},{key:"onRootSelectChange",value:function(e){var t=this;console.log(e),B.a.get("/api/v1/categories/".concat(e)).then((function(e){t.setState({isShow:!0,gData:e.data}),console.log(t.state.gData)})).catch((function(e){console.log("err:",e)}))}},{key:"getCategories",value:function(){var e=this;B.a.get("/api/v1/categories").then((function(t){console.log(t.data);var n=[];t.data.forEach((function(e){return n.push({value:e.id,label:e.title})})),e.setState({categories:n})})).catch((function(e){console.log("err:",e)}))}},{key:"postCategories",value:function(e){B.a.defaults.headers.common["X-CSRF-Token"]=Object(E.csrfToken)(),B()({method:"POST",url:"/api/v1/categories/update_recursive",data:{category:{data:this.state.gData,removes:this.state.removes}}}).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))}},{key:"componentDidMount",value:function(){this.getCategories()}},{key:"render",value:function(){var e;return this.state.isShow&&(e=Object(S.jsx)(pe,{gData:this.state.gData,removes:this.state.removes,visible:this.state.isShow})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a root category",onChange:this.onRootSelectChange,options:this.state.categories}),e,Object(S.jsx)(y.a,{type:"primary",onClick:this.handleButton,children:"Post Categories"})]})}}]),n}(a.Component)),fe=n(185),me=n.n(fe),ve=(n(305),function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).state={markdown:"",textValue:"",files:[]},e.handleDrop=e.handleDrop.bind(Object(p.a)(e)),e}return Object(g.a)(n,[{key:"handleDrop",value:function(e,t){var n=t.dataTransfer.files;if(n.length>0){var a=n[0];alert("FileName : "+a.name),console.log(a);var s=this.state.files;s.push(a);var i=this.state.markdown+'<img src="'.concat(a.name,'">');this.setState({files:s,textValue:i}),console.log(i)}}},{key:"render",value:function(){var e=this;return Object(S.jsx)(me.a,{onChange:function(t){return e.setState({markdown:t})},value:this.state.textValue,events:{drop:this.handleDrop}})}}]),n}(a.Component)),xe=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.call(this)}return Object(g.a)(n,[{key:"render",value:function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(ve,{})})}}]),n}(a.Component),ke=c.a.SubMenu,ye=r.a.Header,Ce=r.a.Content,Se=r.a.Sider;var Fe=function(){return Object(S.jsx)(u.a,{children:Object(S.jsxs)(r.a,{children:[Object(S.jsxs)(ye,{className:"header",children:[Object(S.jsx)("div",{className:"logo"}),Object(S.jsx)(c.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/",children:"\u30db\u30fc\u30e0"})},"1")})]}),Object(S.jsxs)(r.a,{children:[Object(S.jsx)(Se,{width:200,className:"site-layout-background",children:Object(S.jsxs)(c.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0},children:[Object(S.jsxs)(ke,{icon:Object(S.jsx)(l.a,{}),title:"\u554f\u984c",children:[Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/new/problem",children:"\u65b0\u898f\u4f5c\u6210"})},"1"),Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/solve/problems",children:"\u5fa9\u7fd2"})},"2"),Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/solve/today_problems",children:"\u6700\u8fd1\u306e\u554f\u984c"})},"3")]},"sub1"),Object(S.jsxs)(ke,{icon:Object(S.jsx)(h.a,{}),title:"\u30c7\u30fc\u30bf\u7de8\u96c6",children:[Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/new/category",children:"\u65b0\u898f\u30ab\u30c6\u30b4\u30ea"})},"2"),Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/edit/category",children:"\u30ab\u30c6\u30b4\u30ea\u7de8\u96c6"})},"3"),Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/new/book",children:"\u65b0\u898f\u66f8\u7c4d"})},"4")]},"sub2"),Object(S.jsx)(ke,{icon:Object(S.jsx)(h.a,{}),title:"\u30d6\u30ed\u30b0",children:Object(S.jsx)(c.a.Item,{children:Object(S.jsx)(u.b,{to:"/blog/post",children:"\u65b0\u898f\u30ab\u30c6\u30b4\u30ea"})},"5")},"sub3")]})}),Object(S.jsx)(r.a,{style:{padding:"0 24px 24px"},children:Object(S.jsxs)(d.c,{children:[Object(S.jsx)(d.a,{path:"/blog/post",children:Object(S.jsx)(xe,{})}),Object(S.jsx)(d.a,{path:"/new/problem",children:Object(S.jsx)(G,{})}),Object(S.jsx)(d.a,{path:"/solve/problems",children:Object(S.jsx)(W,{})}),Object(S.jsx)(d.a,{path:"/solve/today_problems",children:Object(S.jsx)($,{})}),Object(S.jsx)(d.a,{path:"/new/category",children:Object(S.jsx)(le,{})}),Object(S.jsx)(d.a,{path:"/edit/category",children:Object(S.jsx)(Oe,{})}),Object(S.jsx)(d.a,{path:"/new/book",children:Object(S.jsx)(je,{})}),Object(S.jsx)(d.a,{path:"/",children:Object(S.jsx)(Ce,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:"Content"})})]})})]})]})})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,326)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};o.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(Fe,{})}),document.getElementById("root")),we()}},[[309,1,2]]]);
//# sourceMappingURL=main.8870066d.chunk.js.map